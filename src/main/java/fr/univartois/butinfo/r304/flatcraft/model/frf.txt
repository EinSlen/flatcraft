package fr.univartois.butinfo.r304.flatcraft.model.cellules;

import fr.univartois.butinfo.r304.flatcraft.model.FlatcraftGame;
import fr.univartois.butinfo.r304.flatcraft.model.cellstate.CellState;
import fr.univartois.butinfo.r304.flatcraft.model.cellstate.EmptyCell;
import fr.univartois.butinfo.r304.flatcraft.model.cellstate.ResourceCell;
import fr.univartois.butinfo.r304.flatcraft.model.movables.IMovable;
import fr.univartois.butinfo.r304.flatcraft.model.movables.Player;
import fr.univartois.butinfo.r304.flatcraft.model.resources.Resource;
import fr.univartois.butinfo.r304.flatcraft.view.Sprite;

public class MyCell extends AbstractCell {
    private CellState state;

    public MyCell(int row, int column) {
        super(row, column);
        this.state = new EmptyCell(); // Initialisation à l'état de cellule vide
    }

    protected MyCell(Sprite sprite) {
        super(sprite);
        this.state = new EmptyCell(); // Initialisation à l'état de cellule vide
    }

    protected MyCell(Resource resource) {
        super(resource);
        this.state = new ResourceCell(); // Initialisation à l'état de cellule contenant une ressource
    }

    public void setState(CellState state) {
        this.state = state;
    }

    public void interact(FlatcraftGame game) {
        state.interact(game, this);
    }

    @Override
    public boolean move(IMovable movable) {
        return state.move(movable, this);
    }

    @Override
    public boolean dig(IMovable player) {
        return state.dig(player, this);
    }
}
